
    var pageVueRenderFn = function anonymous(
) {
with(this){return _c('div',{attrs:{"id":"app"}},[_c('header',{attrs:{"sticky":""}},[_c('navbar',{attrs:{"type":"dark"},scopedSlots:_u([{key:"brand",fn:function(){return [_c('a',{staticClass:"navbar-brand",attrs:{"href":"/index.html","title":"Home"}},[_c('img',{attrs:{"src":"/images/logo-darkbackground.svg","height":"20"}})])]},proxy:true},{key:"right",fn:function(){return [_c('li',[_c('form',{staticClass:"navbar-form"},[_c('searchbar',{attrs:{"data":searchData,"placeholder":"Search","on-hit":searchCallback,"menu-align-right":""}})],1)])]},proxy:true}])},[_v(" "),_c('li',[_c('a',{staticClass:"nav-link",attrs:{"highlight-on":"exact","href":"/index.html"}},[_v("HOME")])]),_v(" "),_c('div',{attrs:{"tags":"environment--ug"}},[_c('li',[_c('a',{staticClass:"nav-link",attrs:{"highlight-on":"sibling-or-child","href":"/userGuide/index.html"}},[_v("USER GUIDE")])])]),_v(" "),_c('div',{attrs:{"tags":"environment--dg"}},[_c('li',[_c('a',{staticClass:"nav-link",attrs:{"highlight-on":"sibling-or-child","href":"/devGuide/index.html"}},[_v("DEVELOPER GUIDE")])])]),_v(" "),_c('li',[_c('a',{staticClass:"nav-link",attrs:{"highlight-on":"exact","href":"/showcase.html"}},[_v("SHOWCASE")])]),_v(" "),_c('li',[_c('a',{staticClass:"nav-link",attrs:{"highlight-on":"exact","href":"/about.html"}},[_v("ABOUT")])]),_v(" "),_c('li',[_c('a',{staticClass:"nav-link",attrs:{"href":"https://github.com/MarkBind/markbind","target":"_blank"}},[_c('span',[_c('span',{staticClass:"fab fa-github",attrs:{"aria-hidden":"true"}})])])])])],1),_v(" "),_c('div',{attrs:{"id":"flex-body"}},[_c('overlay-source',{attrs:{"id":"site-nav","tag-name":"nav","to":"site-nav"}},[_c('div',{staticClass:"site-nav-top"},[_c('div',{staticClass:"fw-bold mb-2",staticStyle:{"font-size":"1.25rem"}},[_v("Developer Guide")])]),_v(" "),_c('div',{staticClass:"nav-component slim-scroll"},[_c('site-nav',[_c('overlay-source',{staticClass:"site-nav-list site-nav-list-root",attrs:{"tag-name":"ul","to":"mb-site-nav"}},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/devGuide.html"}},[_v("Contributing")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Onboarding Bootcamp\n\n"),_c('div',{staticClass:"site-nav-dropdown-btn-container"},[_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/bootcamp/intro.html"}},[_v("Introduction")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/bootcamp/exploreMarkBind.html"}},[_v("Explore MarkBind as a User")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/bootcamp/contributeToDocs.html"}},[_v("Contribute to Documentation")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/bootcamp/fixABug.html"}},[_v("Fix a Bug")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/bootcamp/implementAFeature.html"}},[_v("Implement a New Feature")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Development \n\n"),_c('div',{staticClass:"site-nav-dropdown-btn-container"},[_c('i',{staticClass:"site-nav-dropdown-btn-icon site-nav-rotate-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/development/settingUp.html"}},[_v("Setting up")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/development/workflow.html"}},[_v("Workflow")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/development/writingComponents.html"}},[_v("Writing Components")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/development/writingPlugins.html"}},[_v("Writing Plugins")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/development/migratingToTypeScript.html"}},[_v("Migrating to TypeScript")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Design \n\n"),_c('div',{staticClass:"site-nav-dropdown-btn-container"},[_c('i',{staticClass:"site-nav-dropdown-btn-icon site-nav-rotate-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/design/projectStructure.html"}},[_v("Project Structure")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/design/architecture.html"}},[_v("Architecture")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/design/serverSideRendering.html"}},[_v("Server Side Rendering")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("GitHub Actions\n\n"),_c('div',{staticClass:"site-nav-dropdown-btn-container"},[_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/githubActions/overview.html"}},[_v("Overview")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/githubActions/markbindAction.html"}},[_v("markbind-action")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/githubActions/markbindReusableWorkflows.html"}},[_v("markbind-reusable-workflows")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/projectManagement.html"}},[_v("Project management")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Appendices \n\n"),_c('div',{staticClass:"site-nav-dropdown-btn-container"},[_c('i',{staticClass:"site-nav-dropdown-btn-icon site-nav-rotate-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/devGuide/styleGuides.html"}},[_v("Style guides")])])])])])])],1)],1)]),_v(" "),_c('div',{attrs:{"id":"content-wrapper"}},[_m(0),_v(" "),_m(1),_v(" "),_m(2),_v(" "),_m(3),_v(" "),_m(4),_v(" "),_m(5),_v(" "),_m(6),_v(" "),_c('ol',[_m(7),_v(" "),_c('li',[_m(8),_v(" "),_m(9),_v(" "),_c('p',[_v("If the dependency has its typings:")]),_v(" "),_c('ul',[_m(10),_v(" "),_c('li',[_m(11),_v(" "),_m(12),_v(" "),_c('box',{attrs:{"type":"info"}},[_c('p',[_v("It's recommended to try to match the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("@types/<lib-name>")]),_v(" version with the associated module. In general, try to match the major and minor version as closely as possible.")])])],1)])]),_v(" "),_m(13)]),_v(" "),_m(14),_v(" "),_c('ol',[_m(15),_v(" "),_m(16),_v(" "),_m(17),_v(" "),_c('li',[_m(18),_v(" "),_c('box',{attrs:{"type":"info"}},[_c('p',[_v("Any of the "),_c('a',{attrs:{"href":"/devGuide/development/workflow.html#git-hooks"}},[_v("MarkBind-specific git hooks")]),_v(" that have been installed during the "),_c('a',{attrs:{"href":"/devGuide/development/settingUp.html#setting-up-the-git-hooks-optional-but-recommended"}},[_v("setup process")]),_v(" will automatically build the backend. If you encounter any compilation errors while committing and/or pushing the \"Rename\" commit due to git hooks, skip the hooks using the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("--no-verify")]),_v(" flag.\nFor example: "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("git commit --no-verify -m \"Rename core/src/html to TypeScript\"")]),_v(".")])])],1)]),_v(" "),_m(19),_v(" "),_m(20),_v(" "),_c('p',[_v("You are now ready to create a pull request for the changes to the repository.")]),_v(" "),_m(21),_v(" "),_c('p',[_v("While refactoring you may encounter scenarios where you might have to amend your code after a commit. There are 2 common scenarios which we will cover.")]),_v(" "),_c('panel',{scopedSlots:_u([{key:"header",fn:function(){return [_c('p',[_v("Scenario 1: You have 2 commits and want to add on to the second commit.")])]},proxy:true}])},[_v(" "),_c('p',[_v("To append a new commit onto the already existing commit you can do the following:")]),_v(" "),_c('ol',[_c('li',[_v("Make the changes you want to add to the second commit")]),_v(" "),_c('li',[_v("Stage the changes using "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("git add")])]),_v(" "),_c('li',[_v("Run "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("git commit --amend")])]),_v(" "),_c('li',[_v("This will open your default text editor, where you can edit the commit message for the second commit to reflect the new changes you have made")]),_v(" "),_c('li',[_v("Save and close the text editor. This will replace the second commit with the updated changes.")])]),_v(" "),_c('box',{attrs:{"type":"warning"}},[_v("\nAmending a commit changes its commit hash, which means that if you've already pushed the original commit to a remote repository, you'll need to force push your changes.\n")])],1),_v(" "),_c('panel',{scopedSlots:_u([{key:"header",fn:function(){return [_c('p',[_v("Scenario 2: You have more than 2 commits and want to make it into 2 commits.")])]},proxy:true}])},[_v(" "),_c('ol',[_c('li',[_v("Run "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("git rebase -i master")]),_v(" to start an interactive rebase session. This will show a list of the recent commits in your text editor.")]),_v(" "),_c('li',[_v("In the text editor, replace the word \"pick\" in front of the commit you want to keep with the word \"squash\" for the other commits you want to combine into one.")]),_v(" "),_c('li',[_v("Git will combine the other \"squash\"ed commits into one and open your text editor for you to edit the commit message. You can either keep the original messages or create a new message that summarizes the changes.")]),_v(" "),_c('li',[_v("Git will reapply the other combined commits on top of the remaining \"pick\"ed commit.")]),_v(" "),_c('li',[_v("Finally, run "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("git push -f")]),_v(" to force push the changes to your remote repository.")])])]),_v(" "),_c('br'),_v(" "),_m(22),_v(" "),_c('p',[_v("You can see these pull requests to observe the finished migration works:")]),_v(" "),_m(23),_v(" "),_m(24),_v(" "),_c('p',[_v("Here is the reference on changing the import/export statements from CommonJS syntax into those that TypeScript support: TypeScript equivalent syntax, and ES6 syntax.")]),_v(" "),_m(25),_v(" "),_m(26),_v(" "),_c('p',[_v("In the tables below, a \"thing\" is defined as a JavaScript construct that can be exported, such as constants, functions, classes, etc. In ES6 syntax, a \"thing\" can also be TypeScript constructs like types, interfaces, enums, etc.")]),_v(" "),_m(27),_v(" "),_m(28),_m(29),_v(" "),_m(30),_v(" "),_m(31),_m(32),_v(" "),_m(33),_v(" "),_m(34),_m(35),_v(" "),_m(36),_v(" "),_m(37),_v(" "),_m(38),_v(" "),_c('p',[_v("When we rename files, we have to keep the Git similarity index between the old file and the new file above a certain threshold (50%) to keep the history, or else it will be regarded as a different file with its own history.")]),_v(" "),_c('p',[_v("Combining the two steps into one - that is, adapting files immediately after renaming - will lower the similarity index, therefore making it possible for the files, especially small ones or those that need a lot of changes when adapting, to hit below the similarity threshold and lose their history.")]),_v(" "),_m(39),_v(" "),_m(40),_v(" "),_c('p',[_v("Even if the migration developer has kept the history intact through the separate \"Rename\" and \"Adapt\" commits, this is only intact at their working branch. At the end of the day, the totality of the changes in the working branch is compared against the target branch, in which the same consideration would apply.")]),_v(" "),_c('p',[_v("If we do the usual squash commit, the changes from the two commits are combined into a new commit and only that commit will be pushed into the target branch. The original two commits are omitted, therefore the history of the working branch that we have tried to keep intact is stripped away. This results in a linear history, as if the changes in the working branch were made\nafter the latest changes in the target branch.")]),_v(" "),_m(41),_v(" "),_c('br')],1),_v(" "),_c('overlay-source',{attrs:{"id":"page-nav","tag-name":"nav","to":"page-nav"}},[_c('div',{staticClass:"nav-component slim-scroll"},[_c('overlay-source',{staticClass:"nav nav-pills flex-column my-0 small no-flex-wrap",attrs:{"id":"mb-page-nav","tag-name":"nav","to":"mb-page-nav"}},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#migrating-to-typescript"}},[_v("Migrating to TypeScript‎")]),_v(" "),_c('nav',{staticClass:"nav nav-pills flex-column my-0 nested no-flex-wrap"},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#migration-steps"}},[_v("Migration Steps‎")]),_v(" "),_c('nav',{staticClass:"nav nav-pills flex-column my-0 nested no-flex-wrap"},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#step-1-preparation"}},[_v("Step 1: Preparation‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#step-2-and-quot-rename-and-quot-commit"}},[_v("Step 2: \"Rename\" Commit‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#step-3-and-quot-adapt-and-quot-commit"}},[_v("Step 3: \"Adapt\" Commit‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#optional-step-4-changing-the-commit"}},[_v("(Optional) Step 4: Changing the commit‎")])]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#example-of-migrated-works"}},[_v("Example of Migrated Works‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#import-export-syntax-reference"}},[_v("Import/Export Syntax Reference‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#explanation-notes"}},[_v("Explanation Notes‎")]),_v(" "),_c('nav',{staticClass:"nav nav-pills flex-column my-0 nested no-flex-wrap"},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#why-do-we-need-to-separate-and-quot-rename-and-quot-and-and-quot-adapt-and-quot-commits"}},[_v("Why do we need to separate \"Rename\" and \"Adapt\" commits‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#why-do-we-need-a-rebase-and-merge-commit"}},[_v("Why do we need a rebase and merge commit‎")])])])])],1)]),_v(" "),_c('scroll-top-button')],1),_v(" "),_m(42)])}
};
    var pageVueStaticRenderFns = [function anonymous(
) {
with(this){return _c('p',[_c('span',{staticClass:"d-none",attrs:{"id":"title"}},[_v("Migrating to TypeScript")])])}
},function anonymous(
) {
with(this){return _c('h1',{attrs:{"id":"migrating-to-typescript"}},[_c('span',{staticClass:"anchor",attrs:{"id":"migrating-to-typescript"}}),_v("Migrating to TypeScript"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#migrating-to-typescript","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('div',{staticClass:"lead"},[_c('p',[_v("In order to improve the quality and security of our backend code, we are introducing TypeScript to our codebase to leverage the type-checking system. This page outlines the steps of migrating existing files into TypeScript.")])])}
},function anonymous(
) {
with(this){return _c('h2',{attrs:{"id":"migration-steps"}},[_c('span',{staticClass:"anchor",attrs:{"id":"migration-steps"}}),_v("Migration Steps"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#migration-steps","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('p',[_v("The TypeScript migration process is a little different than normal development work, as maintainers would not follow the normal procedure of creating a squash commit. Instead, they will do a "),_c('strong',[_v("rebase and merge")]),_v(", and therefore migration developers will need to structure the commits in a particular way.")])}
},function anonymous(
) {
with(this){return _c('p',[_v("We have decided on structuring the commits as two commits: a \"Rename\" commit and an \"Adapt\" commit. If you need further context on the approach, feel free to read the "),_c('a',{attrs:{"href":"#explanation-notes"}},[_v("Explanation Notes")]),_v(" section below.")])}
},function anonymous(
) {
with(this){return _c('h3',{attrs:{"id":"step-1-preparation"}},[_c('span',{staticClass:"anchor",attrs:{"id":"step-1-preparation"}}),_v("Step 1: Preparation"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#step-1-preparation","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('li',[_c('p',[_c('strong',[_v("If running, stop automatic compilation on change/save")]),_v(". More on this at "),_c('a',{attrs:{"href":"/devGuide/development/workflow.html#editing-backend-features"}},[_v("Editing backend features")]),_v(" section in the Workflow page.")])])}
},function anonymous(
) {
with(this){return _c('p',[_c('strong',[_v("Install typings of external dependencies")]),_v(" relevant to the files, if there's any that hasn't been installed yet.")])}
},function anonymous(
) {
with(this){return _c('p',[_v("Generally, external modules have their typings published as another module named "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("@types/<lib-name>")]),_v(" (e.g. "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("@types/jest")]),_v(") or bundled alongside their implementation. You can check which is the case "),_c('a',{attrs:{"href":"https://www.typescriptlang.org/dt/search?search="}},[_v("here")]),_v(". Check for "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("@types/<lib-name>")]),_v(" first, then check for "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("<lib-name>")]),_v(" itself if not found.")])}
},function anonymous(
) {
with(this){return _c('li',[_c('p',[_v("Bundled alongside their implementation, you don't need to do anything else.")])])}
},function anonymous(
) {
with(this){return _c('p',[_v("In a "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("@types/<lib-name>")]),_v(" module, install it as a development dependency for the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("core")]),_v(" package by navigating to "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("packages/core")]),_v(" and running "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("npm i -D @types/<lib-name>")]),_v(".")])}
},function anonymous(
) {
with(this){return _c('p',[_v("After installing all necessary typings, delete the generated "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("packages/core/package-lock.json")]),_v(", navigate back to the root directory, and run "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("npm run setup")]),_v(".")])}
},function anonymous(
) {
with(this){return _c('li',[_c('p',[_c('strong',[_v("Stash the changes")]),_v(" ("),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("packages/core/package.json")]),_v(" and root "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("package-lock.json")]),_v(").\n"),_c('br'),_v("\nThis will be added back during the \"Adapt\" commit later.")])])}
},function anonymous(
) {
with(this){return _c('h3',{attrs:{"id":"step-2-and-quot-rename-and-quot-commit"}},[_c('span',{staticClass:"anchor",attrs:{"id":"step-2-and-quot-rename-and-quot-commit"}}),_v("Step 2: \"Rename\" Commit"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#step-2-and-quot-rename-and-quot-commit","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('li',[_c('p',[_c('strong',[_v("Add the paths of the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".js")]),_v(" files to "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".gitignore")]),_v(" and "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".eslintignore")])]),_v(".\n"),_c('br'),_v("\nThis instructs Git and ESLint to ignore the compiled JavaScript from the files that are going to be renamed.")])])}
},function anonymous(
) {
with(this){return _c('li',[_c('p',[_c('strong',[_v("Rename the files")]),_v(" from having "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".js")]),_v(" extensions to "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".ts")]),_v(" extensions.")])])}
},function anonymous(
) {
with(this){return _c('li',[_c('p',[_c('strong',[_v("Stage the changes")]),_v(" (the renamed files, "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".gitignore")]),_v(", and "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".eslintignore")]),_v(") for commit.\n"),_c('br'),_v("\nEnsure the renamed files are regarded by Git as "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("renamed")]),_v(" and not "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("added")]),_v(".")])])}
},function anonymous(
) {
with(this){return _c('p',[_c('strong',[_v("Commit the staged changes")]),_v(" with the message "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("Rename <file-or-folder> to TypeScript")]),_v(".\n"),_c('br'),_v("\nFor example: "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("Rename core/src/html to TypeScript")]),_v(".")])}
},function anonymous(
) {
with(this){return _c('h3',{attrs:{"id":"step-3-and-quot-adapt-and-quot-commit"}},[_c('span',{staticClass:"anchor",attrs:{"id":"step-3-and-quot-adapt-and-quot-commit"}}),_v("Step 3: \"Adapt\" Commit"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#step-3-and-quot-adapt-and-quot-commit","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('ol',[_c('li',[_c('p',[_c('strong',[_v("Start automatic compilation on change/save")]),_v(". More on this at "),_c('a',{attrs:{"href":"/devGuide/development/workflow.html#editing-backend-features"}},[_v("Editing backend features")]),_v(" section in the Workflow page.")])]),_v(" "),_c('li',[_c('p',[_c('strong',[_v("Change the CommonJS module import/export syntax")]),_v(" to TypeScript's equivalent syntax (use ES6 syntax only if possible).")]),_v(" "),_c('p',[_v("A common error in newly renamed files comes from the way modules are imported/exported. Those statements can be converted according to the "),_c('a',{attrs:{"href":"#import-export-syntax-reference"}},[_v("Import/Export Syntax Reference")]),_v(" section below. The steps are as follows:")]),_v(" "),_c('ol',[_c('li',[_c('p',[_v("Start by changing the import/export statements into TypeScript equivalent syntax. Be careful with imports as you have to match them with the export syntax that the modules use, be it TypeScript equivalent or ES6.")])]),_v(" "),_c('li',[_c('p',[_v("Check whether it is possible to change the export to use ES6 syntax. As mentioned in the syntax reference, ES6 should not be used if the module only exports a single thing. Change to ES6 syntax only if possible, otherwise keep with TypeScript equivalent syntax.")])]),_v(" "),_c('li',[_c('p',[_v("You might have to "),_c('strong',[_v("adjust how the files are imported by other TypeScript ("),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".ts")]),_v(") files")]),_v(". If you are changing the export to the TypeScript equivalent syntax, then it must be imported the same way as well. The same goes for the ES6 syntax.")])])])]),_v(" "),_c('li',[_c('p',[_c('strong',[_v("Adapt the files")]),_v(" fully to TypeScript.")]),_v(" "),_c('p',[_v("The errors from TypeScript and "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("typescript-eslint")]),_v(" can guide you on what to fix. Only fix what is necessary and be careful with accidentally modifying any code functionality. Avoid using "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("any")]),_v(" as best as you can.")]),_v(" "),_c('p',[_v("If you happen to encounter type errors related to using names (of constant, properties, members, etc.) from another MarkBind import that is still in JavaScript ("),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".js")]),_v("), you can try to infer simple types in your file first as a \"stand-in\" of the more robust types when that internal dependency is eventually migrated.")]),_v(" "),_c('p',[_v("On the flip side of the above situation, once you have developed a robust type for your own file, "),_c('strong',[_v("adjust how other TypeScript ("),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".ts")]),_v(") files type names referenced from your files")]),_v(" as applicable. Some type declarations might need to be made stricter, or can be removed if it's not necessary anymore, and so on. This will ensure that the files will be incrementally stricter.")])]),_v(" "),_c('li',[_c('p',[_c('strong',[_v("Make sure everything is in order")]),_v(" by running "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("npm run test")]),_v(" in the root directory.")]),_v(" "),_c('p',[_v("The "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("core")]),_v(" package tests can directly run on the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".ts")]),_v(" files (powered by "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("ts-jest")]),_v("), and the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("cli")]),_v(" package tests uses the compiled files from "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("core")]),_v(". Therefore, passing the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("cli")]),_v(" tests means that it is very likely the compiled files work as expected.")])]),_v(" "),_c('li',[_c('p',[_c('strong',[_v("Stage the adapted files and the typings from Step 1")]),_v(" for commit. Verify the changes before committing.")])]),_v(" "),_c('li',[_c('p',[_c('strong',[_v("Commit the changes")]),_v(" with the message "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("Adapt <file-or-folder> to TypeScript")]),_v(".\n"),_c('br'),_v("\nFor example, "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("Adapt core/src/html to TypeScript")]),_v(".")])])])}
},function anonymous(
) {
with(this){return _c('h3',{attrs:{"id":"optional-step-4-changing-the-commit"}},[_c('span',{staticClass:"anchor",attrs:{"id":"optional-step-4-changing-the-commit"}}),_v("(Optional) Step 4: Changing the commit"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#optional-step-4-changing-the-commit","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('h2',{attrs:{"id":"example-of-migrated-works"}},[_c('span',{staticClass:"anchor",attrs:{"id":"example-of-migrated-works"}}),_v("Example of Migrated Works"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#example-of-migrated-works","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/MarkBind/markbind/pull/1877"}},[_v("#1877: Adopt TypeScript for core package")])])])}
},function anonymous(
) {
with(this){return _c('h2',{attrs:{"id":"import-export-syntax-reference"}},[_c('span',{staticClass:"anchor",attrs:{"id":"import-export-syntax-reference"}}),_v("Import/Export Syntax Reference"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#import-export-syntax-reference","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('p',[_v("The TypeScript equivalent syntax is designed to compile to the exact same code as CommonJS. You can read more about this syntax in the "),_c('a',{attrs:{"href":"https://www.typescriptlang.org/docs/handbook/modules.html#export--and-import--require"}},[_v("official documentation")]),_v(".")])}
},function anonymous(
) {
with(this){return _c('p',[_v("The ES6 syntax is the newer JavaScript syntax that TypeScript recommends, but in certain cases it does not compile to the exact same code as CommonJS. We simplify the concepts here for illustration, refer to the StackOverflow post "),_c('a',{attrs:{"href":"https://stackoverflow.com/questions/40294870/module-exports-vs-export-default-in-node-js-and-es6"}},[_v("here")]),_v(" for more details.")])}
},function anonymous(
) {
with(this){return _c('p',[_c('span',{staticClass:"underline"},[_c('strong',[_v("Exports")])])])}
},function anonymous(
) {
with(this){return _c('div',{staticClass:"table-responsive"},[_c('table',{staticClass:"markbind-table table table-bordered table-striped"},[_c('thead',[_c('tr',[_c('th',[_v("What to Export")]),_v(" "),_c('th',[_v("CommonJS")]),_v(" "),_c('th',[_v("TypeScript equivalent")]),_v(" "),_c('th',[_v("ES6")])])]),_v(" "),_c('tbody',[_c('tr',[_c('td',[_v("One thing only")]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("module.exports = x")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("export = x")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("export default x")]),_v(" "),_c('strong',[_v(" ^")])])]),_v(" "),_c('tr',[_c('td',[_v("Object of one/more things")]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("module.exports = { x, y, z }")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("export = { x, y, z }")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("export { x, y, z }")])])])])])])}
},function anonymous(
) {
with(this){return _c('p',[_c('strong',[_v("^")]),_v(": For compatibility, "),_c('strong',[_v("do not use")]),_v(" "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("export default")]),_v(" during migration. It is compiled differently and does not play well with dependants that are still in "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".js")]),_v(", unless some clunky modifications are made in the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".js")]),_v(" files (refer to the StackOverflow post previously "),_c('a',{attrs:{"href":"https://stackoverflow.com/questions/40294870/module-exports-vs-export-default-in-node-js-and-es6"}},[_v("linked")]),_v(").")])}
},function anonymous(
) {
with(this){return _c('p',[_c('span',{staticClass:"underline"},[_c('strong',[_v("Imports from a module that exports one thing only")])])])}
},function anonymous(
) {
with(this){return _c('div',{staticClass:"table-responsive"},[_c('table',{staticClass:"markbind-table table table-bordered table-striped"},[_c('thead',[_c('tr',[_c('th',[_v("What to Import")]),_v(" "),_c('th',[_v("CommonJS")]),_v(" "),_c('th',[_v("TypeScript equivalent")]),_v(" "),_c('th',[_v("ES6")])])]),_v(" "),_c('tbody',[_c('tr',[_c('td',[_v("Exported thing")]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("const x = require(a)")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("import x = require(a)")]),_v(" "),_c('strong',[_v(" ^")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("import x from a")]),_v(" "),_c('strong',[_v(" ^")])])])])])])}
},function anonymous(
) {
with(this){return _c('p',[_c('strong',[_v("^")]),_v(": You can only use TypeScript equivalent syntax when the exported module is also in the TypeScript equivalent syntax. The same goes for the ES6 syntax.")])}
},function anonymous(
) {
with(this){return _c('p',[_c('span',{staticClass:"underline"},[_c('strong',[_v("Imports from a module that exports an object of one/more things")])])])}
},function anonymous(
) {
with(this){return _c('div',{staticClass:"table-responsive"},[_c('table',{staticClass:"markbind-table table table-bordered table-striped"},[_c('thead',[_c('tr',[_c('th',[_v("What to Import")]),_v(" "),_c('th',[_v("CommonJS")]),_v(" "),_c('th',[_v("TypeScript equivalent")]),_v(" "),_c('th',[_v("ES6")])])]),_v(" "),_c('tbody',[_c('tr',[_c('td',[_v("Entire object")]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("const w = require(a)")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("import w = require(a)")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("import * as w from a")])])]),_v(" "),_c('tr',[_c('td',[_v("Selected things")]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("const { x } = require(a)")])]),_v(" "),_c('td',[_v("N/A  "),_c('strong',[_v(" ^")])]),_v(" "),_c('td',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("import { x } from a")])])])])])])}
},function anonymous(
) {
with(this){return _c('p',[_c('strong',[_v("^")]),_v(": While not equivalent on the compile-level, this can be achieved by importing the entire object then destructuring the object.")])}
},function anonymous(
) {
with(this){return _c('h2',{attrs:{"id":"explanation-notes"}},[_c('span',{staticClass:"anchor",attrs:{"id":"explanation-notes"}}),_v("Explanation Notes"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#explanation-notes","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('h3',{attrs:{"id":"why-do-we-need-to-separate-and-quot-rename-and-quot-and-and-quot-adapt-and-quot-commits"}},[_c('span',{staticClass:"anchor",attrs:{"id":"why-do-we-need-to-separate-and-quot-rename-and-quot-and-and-quot-adapt-and-quot-commits"}}),_v("Why do we need to separate \"Rename\" and \"Adapt\" commits"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#why-do-we-need-to-separate-and-quot-rename-and-quot-and-and-quot-adapt-and-quot-commits","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('p',[_v("We want to keep the file history intact throughout this migration, meaning that we should still be able to see the change history of the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".ts")]),_v(" files even from the time when they were still in "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".js")]),_v(".")])}
},function anonymous(
) {
with(this){return _c('p',[_v("The solution to this is to make the rename and adapt commits separate, in order for Git to recognize first that the file has changed into "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".ts")]),_v(", and so the changes are compared not against the old "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".js")]),_v(" file, but to the renamed "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v(".ts")]),_v(" file instead.")])}
},function anonymous(
) {
with(this){return _c('h3',{attrs:{"id":"why-do-we-need-a-rebase-and-merge-commit"}},[_c('span',{staticClass:"anchor",attrs:{"id":"why-do-we-need-a-rebase-and-merge-commit"}}),_v("Why do we need a rebase and merge commit"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#why-do-we-need-a-rebase-and-merge-commit","onclick":"event.stopPropagation()"}})])}
},function anonymous(
) {
with(this){return _c('div',{staticClass:"clearfix"},[_c('p',[_c('span',{staticClass:"float-start"},[_c('a',{staticClass:"btn btn-light",attrs:{"href":"/devGuide/development/writingPlugins.html"}},[_c('span',[_c('span',{staticClass:"far fa-arrow-alt-circle-left",attrs:{"aria-hidden":"true"}}),_v(" "),_c('span',[_v("Writing Plugins")])])])])]),_v(" "),_c('p',[_c('span',{staticClass:"float-end"},[_c('a',{staticClass:"btn btn-light",attrs:{"href":"/devGuide/design/projectStructure.html"}},[_c('span',[_c('span',[_v("Project Structure")]),_v(" "),_c('span',{staticClass:"far fa-arrow-alt-circle-right",attrs:{"aria-hidden":"true"}})])])])])])}
},function anonymous(
) {
with(this){return _c('div',[_c('footer',[_c('div',{staticClass:"text-center"},[_c('small',[_v("[Generated by "),_c('a',{attrs:{"href":"https://markbind.org/"}},[_v("MarkBind 4.1.0")]),_v(" on Fri, 24 Mar 2023, 15:51:37 GMT+8]")]),_c('br'),_v(" "),_c('small',[_v("This site is powered by "),_c('a',{attrs:{"href":"https://www.netlify.com/"}},[_v("Netlify")]),_v(".")])])])])}
}];
  